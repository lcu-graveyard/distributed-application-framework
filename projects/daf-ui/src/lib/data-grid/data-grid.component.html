<!-- <mat-spinner class="loading-indicator" *ngIf="showLoadingSpinner"></mat-spinner> -->
<div fxLayoutAlign=" start center">
  <mat-form-field *ngIf="config?.features.filter" class="filter-field mr-3 ml-3">
    <input matInput type="text" (keyup)="applyFilter($event.target.value)" placeholder="Filter">
  </mat-form-field>
</div>
<mat-table [dataSource]="dataSource" matSort *ngIf="config">
  <ng-container *ngFor="let column of config.columnDefs" matColumnDef="{{ column.colType }}">
    <mat-header-cell *matHeaderCellDef mat-sort-header [disabled]="!column.sortable">

      <!--
        Show select checkbox in the header
      -->
      <mat-checkbox *ngIf="toggleSelection(config, column)"
                    (change)="$event ? masterToggle() : null"
                    [checked]="selection.hasValue() && isAllSelected()"
                    [indeterminate]="selection.hasValue() && !isAllSelected()">
      </mat-checkbox>

      <!--
        Show the header title
      -->
      {{ column.title }}

    </mat-header-cell>

    <mat-cell *matCellDef="let item">

      <!--
        Show select checkbox in the row
      -->
      <mat-checkbox *ngIf="toggleSelection(config, column)"
                    (click)="$event.stopPropagation()"
                    (change)="$event ? selection.toggle(item) : null"
                    [checked]="selection.isSelected(item)">
      </mat-checkbox>

      <!--
        Show data value
      -->
      <span *ngIf="!column.valueAsIcon && column.colType !== 'select'">
        {{ column.value(item) | dataGridPipes: column.pipe }}
      </span>

      <!--
        When showing an icon instead of data
      -->
      <span *ngIf="column.valueAsIcon">
        <i style="font-size: 30px;" [ngClass]="column.icon"></i>
        {{ column.setColumnData(item) }}
      </span>

    </mat-cell>
  </ng-container>

  <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
  <mat-row *matRowDef="let row; let odd = odd; let even = even; columns: displayedColumns;" [ngClass]= "{ 'gray': even, 'light-gray': odd }" (click)="selection.toggle(row)"></mat-row>

</mat-table>
<mat-paginator
  #paginator
  *ngIf="config?.features.paginator"
  [pageSize]="config?.features.paginator.pageSize"
  [pageSizeOptions]="config?.features.paginator.pageSizeOptions"
  showFirstLastButtons>
</mat-paginator>

